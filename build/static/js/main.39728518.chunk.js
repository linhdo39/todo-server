(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{112:function(e,t,c){"use strict";c.r(t);var r=c(0),a=c.n(r),s=c(28),n=c.n(s),o=c(5),i=c(122),d=c(119),j=c(124),u=c(7),l=a.a.createContext({primaryColor:"deepskyblue",secondaryColor:"coral"}),b=a.a.createContext({state:{},dispatch:function(){}}),O=c(120),h=c(10),x=c(1);function p(e){var t=e.theme,c=e.active,r=e.onClick;return Object(x.jsx)("span",{onClick:r,style:{cursor:"pointer",paddingLeft:8,fontWeight:c?"bold":"normal"},children:Object(x.jsx)("span",{style:{color:t.primaryColor},children:t.name})})}function m(e){var t=e.theme,c=e.setTheme,a=Object(h.b)((function(){return{url:"/themes",method:"get"}})),s=Object(o.a)(a,2),n=s[0],i=s[1];Object(r.useEffect)(i,[]);var d=n.data,j=n.isLoading;function u(e){return e.primaryColor===t.primaryColor&&e.secondaryColor===t.secondaryColor}return Object(x.jsxs)("div",{children:[j&&"Loading themes...",Object(x.jsx)(O.a,{title:"ChangeTheme",id:"basic-nav-dropdown",children:d&&n.data.map((function(e,t){return Object(x.jsx)(O.a.Item,{children:Object(x.jsx)(p,{theme:e,active:u(e),onClick:function(){return c(e)}},t)})}))})]})}var f=c(80),g=c(123),v=c(121);function C(e){var t=e.show,c=e.handleClose,a=Object(r.useContext)(b).dispatch,s=Object(r.useState)(""),n=Object(o.a)(s,2),i=n[0],d=n[1],j=Object(r.useState)(""),u=Object(o.a)(j,2),l=u[0],O=u[1],p=Object(r.useState)(!1),m=Object(o.a)(p,2),C=m[0];m[1];var y=Object(h.b)((function(e,t){return{url:"auth/login",method:"post",data:{username:e,password:t}}})),_=Object(o.a)(y,2),k=_[0],w=_[1];return Object(r.useEffect)((function(){k&&!1===k.isLoading&&(k.data||k.error)&&(k.error||a({type:"LOGIN",id:k.data._id,username:k.data.username,access_token:k.data.access_token}))}),[k]),Object(x.jsx)(g.a,{show:t,onHide:c,children:Object(x.jsxs)(v.a,{onSubmit:function(e){e.preventDefault(),w(i,l),c()},children:[Object(x.jsx)(g.a.Header,{closeButton:!0,children:Object(x.jsx)(g.a.Title,{children:"Login"})}),Object(x.jsxs)(g.a.Body,{children:[Object(x.jsx)(v.a.Label,{htmlFor:"login-username",children:"Username:"}),Object(x.jsx)(v.a.Control,{type:"text",value:i,onChange:function(e){d(e.target.value)},name:"login-username",id:"login-username"}),Object(x.jsx)(v.a.Label,{htmlFor:"login-password",children:"Password:"}),Object(x.jsx)(v.a.Control,{type:"password",value:l,onChange:function(e){O(e.target.value)},name:"login-password",id:"login-password"}),C&&Object(x.jsx)(v.a.Text,{style:{color:"red"},children:"Invalid username or password"})]}),Object(x.jsxs)(g.a.Footer,{children:[Object(x.jsx)(f.a,{variant:"secondary",onClick:c,children:"Cancel"}),Object(x.jsx)(f.a,{variant:"primary",disabled:0===i.length,type:"submit",children:"Login"})]})]})})}function y(){var e=Object(r.useContext)(b),t=e.state,c=e.dispatch,a=t.user;return Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c({type:"LOGOUT"})},children:["Logged in as: ",Object(x.jsxs)("b",{children:[a.username," "]}),Object(x.jsx)("input",{type:"submit",value:"Logout"})]})}var _=c(2);function k(e){var t=e.show,c=e.handleClose,a=Object(r.useContext)(b).dispatch,s=Object(r.useState)(""),n=(Object(o.a)(s,1)[0],Object(u.d)()),i=Object(r.useState)({username:"",password:"",passwordRepeat:""}),d=Object(o.a)(i,2),j=d[0],l=d[1],O=Object(h.b)((function(e,t){return{url:"auth/login",method:"post",data:{username:e,password:t}}})),p=Object(o.a)(O,2),m=(p[0],p[1],Object(h.b)((function(e,t){return{url:"auth/register",method:"post",data:{username:e,password:t,passwordConfirmation:t}}}))),C=Object(o.a)(m,2),y=C[0],k=C[1];return Object(r.useEffect)((function(){y&&y.data&&a({type:"REGISTRATION",username:y.data.username})}),[y]),Object(r.useEffect)((function(){y&&!1===y.isLoading&&(y.data||y.error)&&(y.error?alert("Registration failed, please try again later."):(alert("Registration succeed, please use your username and password to login."),n.navigate("/")))}),[y]),Object(x.jsx)(g.a,{show:t,onHide:c,children:Object(x.jsxs)(v.a,{onSubmit:function(e){e.preventDefault(),k(j.username,j.password),c()},children:[Object(x.jsx)(g.a.Header,{closeButton:!0,children:Object(x.jsx)(g.a.Title,{children:"Register"})}),Object(x.jsxs)(g.a.Body,{children:[Object(x.jsx)(v.a.Label,{htmlFor:"register-username",children:"Username:"}),Object(x.jsx)(v.a.Control,{type:"text",value:j.username,onChange:function(e){return l(Object(_.a)(Object(_.a)({},j),{},{username:e.target.value}))},name:"register-username",id:"register-username"}),Object(x.jsx)(v.a.Label,{htmlFor:"register-password",children:"Password:"}),Object(x.jsx)(v.a.Control,{type:"password",name:"register-password",id:"register-password",value:j.password,onChange:function(e){return l(Object(_.a)(Object(_.a)({},j),{},{password:e.target.value}))}}),Object(x.jsx)(v.a.Label,{htmlFor:"register-password-repeat",children:"Repeat password:"}),Object(x.jsx)(v.a.Control,{type:"password",name:"register-password-repeat",id:"register-password-repeat",value:j.passwordRepeat,onChange:function(e){return l(Object(_.a)(Object(_.a)({},j),{},{passwordRepeat:e.target.value}))}})]}),Object(x.jsxs)(g.a.Footer,{children:[Object(x.jsx)(f.a,{variant:"secondary",onClick:c,children:"Cancel"}),Object(x.jsx)(f.a,{variant:"primary",type:"submit",disabled:0===j.username.length||0===j.password.length||j.password!==j.passwordRepeat,children:"Register"})]})]})})}function w(){var e=Object(r.useContext)(b).state,t=Object(r.useState)(!1),c=Object(o.a)(t,2),a=c[0],s=c[1],n=Object(r.useState)(!1),i=Object(o.a)(n,2),d=i[0],j=i[1];return e.user.username?Object(x.jsx)(y,{}):Object(x.jsxs)("div",{className:"justify-content-end",children:[Object(x.jsx)(f.a,{variant:"link",onClick:function(e){return s(!0)},children:"Login"}),Object(x.jsx)(C,{show:a,handleClose:function(){return s(!1)}}),Object(x.jsx)(f.a,{variant:"link",onClick:function(e){return j(!0)},children:"Register"}),Object(x.jsx)(k,{show:d,handleClose:function(){return j(!1)}})]})}function T(e){var t=e.setTheme,c=Object(r.useContext)(l),s=Object(r.useContext)(b).state.user,n=Object(r.useContext)(l).primaryColor;return Object(r.useEffect)((function(){s.username?document.title="".concat(s.username,"\u2019s Blog"):document.title="Blog"}),[s.username]),Object(x.jsx)(i.a,{bg:"light",expand:"lg",children:Object(x.jsxs)(d.a,{children:[Object(x.jsx)(i.a.Brand,{style:{color:n},children:" My Todo "}),Object(x.jsx)(i.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(x.jsxs)(i.a.Collapse,{id:"basic-navbar-nav",children:[Object(x.jsxs)(j.a,{className:"me-auto",children:[Object(x.jsxs)(j.a.Link,{children:[" ",Object(x.jsx)(u.a,{href:"/",children:"Home"})]}),s.username&&Object(x.jsx)(j.a.Link,{children:Object(x.jsx)(u.a,{href:"/users/",children:"Show All Users"})}),s.username&&Object(x.jsx)(j.a.Link,{children:Object(x.jsx)(u.a,{href:"/todos/create",children:"Create New Todo"})}),Object(x.jsx)(m,{theme:c,setTheme:t})]}),Object(x.jsx)(a.a.Suspense,{fallback:"Loading...",children:Object(x.jsx)(w,{})})]})]})})}var E=c(125);function L(e){var t=e._id,c=e.user,a=e.title,s=e.create_date,n=e.description,o=e.short,i=void 0!==o&&o,d=Object(r.useContext)(l).secondaryColor,j=Object(r.useContext)(l).primaryColor,b=n;return i&&n.length>30&&(b=n.substring(0,30)+"..."),Object(x.jsxs)("div",{children:[Object(x.jsx)(E.a,{style:{background:d},children:Object(x.jsxs)(E.a.Body,{children:[Object(x.jsx)(E.a.Title,{children:Object(x.jsx)(u.a,{style:{color:j},href:"/todos/".concat(t),children:a})}),Object(x.jsx)(E.a.Subtitle,{children:Object(x.jsxs)("p",{children:[" ",Object(x.jsx)("b",{children:"Create by:"})," ",c," on ",s," "]})}),Object(x.jsx)(E.a.Text,{children:b}),i&&Object(x.jsx)(u.a,{style:{color:j},href:"/todos/".concat(t),children:"View full post"})]})}),Object(x.jsx)("div",{children:"      "}),Object(x.jsx)("hr",{})]})}function S(){var e=Object(r.useContext)(b).state,t=Object(r.useContext)(l).secondaryColor,c=e.todos;return Object(x.jsx)("div",{children:c?c.map((function(e,t){return Object(r.createElement)(L,Object(_.a)(Object(_.a)({},e),{},{id:e.id,user:e.user,short:!0,title:e.title,create_date:e.create_date,description:e.description,key:"Todo-"+t}))})):Object(x.jsx)(E.a,{style:{background:t},children:Object(x.jsx)(E.a.Body,{children:Object(x.jsx)(E.a.Text,{children:"No Todo Items Found"})})})})}function R(){var e=Object(r.useContext)(b),t=e.state,c=e.dispatch,a=Object(h.b)((function(){return{url:"/todos",method:"get",headers:{Authorization:"".concat(t.user.access_token)}}})),s=Object(o.a)(a,2),n=s[0],i=s[1],d=Object(h.b)((function(){return{url:"/users",headers:{Authorization:"".concat(t.user.access_token)},method:"get"}})),j=Object(o.a)(d,2),u=j[0],l=j[1];Object(r.useEffect)((function(){i()}),[t.user.access_token]),Object(r.useEffect)((function(){n&&!1===n.isLoading&&n.data&&c({type:"GET_TODOS",todos:n.data.todos})}),[n]),Object(r.useEffect)(l,[t.user.access_token]),Object(r.useEffect)((function(){u.data&&c({type:"USERS",users:u.data})}),[u]);n.data;var O=n.isLoading;return Object(x.jsxs)(x.Fragment,{children:[O&&"Loading Todos..."," ",Object(x.jsx)(S,{})]})}function F(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),c=t[0],a=t[1],s=Object(r.useState)(""),n=Object(o.a)(s,2),i=n[0],d=n[1],j=Object(u.d)(),O=Object(r.useContext)(b),p=O.state,m=O.dispatch,f=p.user,g=Object(r.useContext)(l).primaryColor,v=Object(h.b)((function(e){var t=e.user,c=e.title,r=e.description;return{url:"/todos",method:"post",headers:{Authorization:"".concat(p.user.access_token)},data:{user:t,title:c,description:r}}})),C=Object(o.a)(v,2),y=C[0],_=C[1];return Object(r.useEffect)((function(){y&&!1===y.isLoading&&y.data&&(m({type:"CREATE_TODO",id:y.data.id,user:y.data.user,create_date:y.data.create_date,title:y.data.title,description:y.data.description,completed:y.data.completed,completed_date:y.data.completed_date}),j.navigate("/todos/".concat(y.data.id)))}),[y]),Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),_({user:f.username,title:c,description:i})},children:[Object(x.jsx)("br",{}),Object(x.jsxs)("div",{children:["User: ",Object(x.jsx)("b",{children:f.username})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{htmlFor:"create-title",children:"Title:"}),Object(x.jsx)("div",{}),Object(x.jsx)("input",{type:"text",value:c,onChange:function(e){a(e.target.value)},name:"create-title",id:"create-title"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{htmlFor:"create-description",children:"Description: "}),Object(x.jsx)("div",{children:" "}),Object(x.jsx)("textarea",{value:i,onChange:function(e){d(e.target.value)}})]}),Object(x.jsx)("input",{"background-color":{color:g},type:"submit",value:"Create"})]})}function D(e){var t=e._id,c=e.user,a=e.title,s=e.create_date,n=e.description,i=e.completed,d=e.completed_date,j=e.short,O=void 0!==j&&j,p=Object(r.useContext)(b),m=p.state,g=p.dispatch,v=Object(r.useContext)(l).secondaryColor,C=Object(r.useContext)(l).primaryColor,y=m.users,_=Object(u.d)(),k=Object(r.useState)(""),w=Object(o.a)(k,2),T=(w[0],w[1]);var L=Object(h.b)((function(){return{url:"/todos/".concat(t),headers:{Authorization:"".concat(m.user.access_token)},method:"get"}})),S=Object(o.a)(L,2),R=(S[0],S[1]),F=Object(h.b)((function(){return{url:"/todos/".concat(t),method:"patch",headers:{Authorization:"".concat(m.user.access_token)},data:{completed:!i,completed_date:new Date(Date.now()).toLocaleDateString("en-us")}}})),D=Object(o.a)(F,2),G=D[0],B=D[1],A=Object(h.b)((function(){return{url:"/todos/".concat(t),method:"delete",headers:{Authorization:"".concat(m.user.access_token)}}})),I=Object(o.a)(A,2),U=I[0],z=I[1],P=Object(r.useState)("");y.map((function(e,t){e.username===c&&(P=e._id)})),Object(r.useEffect)((function(){G&&G.data&&!1===G.isLoading&&g({type:"TOGGLE_TODO",completed:G.data.completed,completed_date:G.data.completed_date,_id:t})}),[G]),Object(r.useEffect)((function(){U&&U.data&&!1===U.isLoading&&(g({type:"DELETE_TODO",_id:t}),_.navigate("/todos/delete/".concat(P)))}),[U]),Object(r.useEffect)(R,[t]);var N=n;return O&&n.length>100&&(N=n.substring(0,100)+"..."),G.data&&(i=G.data.completed,d=G.data.completed_date),Object(x.jsxs)("div",{children:[Object(x.jsx)(E.a,{style:{background:v},children:Object(x.jsxs)(E.a.Body,{children:[Object(x.jsx)(E.a.Title,{children:Object(x.jsx)(u.a,{style:{color:C},href:"/todos/".concat(t),children:a})}),Object(x.jsx)(E.a.Subtitle,{children:Object(x.jsxs)("p",{children:[" ",Object(x.jsx)("b",{children:"Create by:"})," ",c," on ",s," "]})}),Object(x.jsx)(E.a.Text,{children:N}),Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"checkbox",checked:i,onChange:function(e){T(e.target.value)},onClick:function(e){B(t,e.target.checked)}}),Object(x.jsx)("b",{children:" Complete? "}),Object(x.jsx)("br",{}),i&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("b",{children:"Date Completed:"})," ",Object(x.jsxs)("i",{children:[d," "]})]})]}),Object(x.jsx)("br",{}),Object(x.jsx)(f.a,{style:{background:C},onClick:function(e){return z(t)},children:" Delete"}),Object(x.jsx)("div",{children:O&&Object(x.jsx)(u.a,{href:"/todos/".concat(t),children:"View full post"})})]})}),Object(x.jsx)("div",{children:"     "}),Object(x.jsx)("hr",{})]})}function G(e){var t=e.id,c=Object(r.useContext)(b).state,a=c.user,s=Object(h.b)((function(){return{url:"/todos/".concat(t),headers:{Authorization:"".concat(c.user.access_token)},method:"get"}})),n=Object(o.a)(s,2),i=n[0],d=n[1];return Object(r.useEffect)(d,[t]),a&&i.data&&a.username===i.data.user?Object(x.jsxs)("div",{children:[i&&i.data?Object(x.jsx)(D,Object(_.a)({},i.data)):"Loading...",Object(x.jsx)("hr",{}),Object(x.jsx)("div",{children:Object(x.jsx)(u.a,{href:"/",children:"Go back to HomePage"})})]}):Object(x.jsxs)("div",{children:[i&&i.data?Object(x.jsx)(L,Object(_.a)({},i.data)):"Loading...",Object(x.jsx)("div",{children:Object(x.jsx)(u.a,{href:"/",children:"Go back to HomePage"})})]})}function B(){var e=Object(r.useContext)(b).state.todos,t=Object(r.useContext)(l).secondaryColor;return Object(x.jsx)("div",{children:e.length>0?e.map((function(e,t){return Object(r.createElement)(D,Object(_.a)(Object(_.a)({},e),{},{id:e.id,user:e.user,short:!0,title:e.title,create_date:e.create_date,description:e.description,completed:e.completed,completed_date:e.completed_date,key:"Todo-"+t}))})):Object(x.jsx)(E.a,{style:{background:t},children:Object(x.jsx)(E.a.Body,{children:Object(x.jsxs)(E.a.Text,{children:["No To-do Item. ",Object(x.jsx)(u.a,{href:"/todos/create",children:" You can create new to-do item here "})]})})})})}function A(e){var t=e.id,c=Object(r.useContext)(b),a=c.state,s=c.dispatch,n=Object(r.useState)([]),i=Object(r.useState)(!0),d=Object(o.a)(i,2),j=d[0],l=d[1],O=a.user,p=Object(h.b)((function(){return{url:"/users/".concat(t),method:"get",headers:{Authorization:"".concat(a.user.access_token)}}})),m=Object(o.a)(p,2),f=m[0],g=m[1];return Object(r.useEffect)(g,[a.user.access_token]),Object(r.useEffect)((function(){f&&!1===f.isLoading&&f.data&&(j?(document.title="".concat(f.data.username,"\u2019s Blog"),s({type:"GET_PROFILE",users:f.data.user_todos}),l(!1)):document.title="Blog")}),[n]),f.data&&!1===f.isLoading?O.username===f.data.username?Object(x.jsxs)("div",{children:[Object(x.jsx)(B,{}),Object(x.jsx)("hr",{}),Object(x.jsx)("div",{children:Object(x.jsx)(u.a,{href:"/users",children:"Go back"})})]}):Object(x.jsxs)("div",{children:[Object(x.jsx)(S,{}),Object(x.jsx)("hr",{}),Object(x.jsx)("div",{children:Object(x.jsx)(u.a,{href:"/users",children:"Go back"})})]}):Object(x.jsx)("div",{children:Object(x.jsx)("div",{children:Object(x.jsx)(u.a,{href:"/users",children:"Go back"})})})}function I(e){var t=e._id,c=e.username,a=Object(r.useContext)(l).secondaryColor,s=Object(r.useContext)(l).primaryColor;return Object(x.jsxs)("div",{children:[Object(x.jsx)(E.a,{style:{background:a},children:Object(x.jsx)(E.a.Body,{children:Object(x.jsx)(E.a.Title,{children:Object(x.jsx)(u.a,{style:{color:s},href:"/users/".concat(t),children:c})})})}),Object(x.jsx)("div",{children:" "}),Object(x.jsx)("hr",{})]})}function U(){var e=Object(r.useContext)(b).state.users;return Object(x.jsx)("div",{children:e.map((function(e,t){return Object(r.createElement)(I,Object(_.a)(Object(_.a)({},e),{},{id:e.id,username:e.username,key:"user"+t}))}))})}function z(){var e=Object(r.useContext)(b),t=e.state,c=e.dispatch,a=Object(h.b)((function(){return{url:"/users",headers:{Authorization:"".concat(t.user.access_token)},method:"get"}})),s=Object(o.a)(a,2),n=s[0],i=s[1];Object(r.useEffect)(i,[t.user.access_token]),Object(r.useEffect)((function(){n.data&&c({type:"USERS",users:n.data})}),[n]);n.data;var d=n.isLoading;return Object(x.jsxs)(x.Fragment,{children:[d&&"Users loading..."," ",Object(x.jsx)(U,{})]})}c(111);var P=c(12),N=c(33);function H(e,t){switch(t.type){case"LOGIN":case"REGISTER":return{username:t.username,access_token:t.access_token};case"LOGOUT":return{username:void 0,access_token:void 0};case"GET_USERS":return t.user;default:return e}}function J(e,t){switch(t.type){case"CREATE_TODO":return[{id:t.id,user:t.user,title:t.title,create_date:t.create_date,description:t.description,completed:t.completed,completed_date:t.completed_date}].concat(Object(N.a)(e));case"DELETE_TODO":return e.filter((function(e){return e._id!==t._id}));case"TOGGLE_TODO":return e.map((function(e){return e._id===t._id&&(e.completed=t.completed,e.completed_date=t.completed_date),e}));case"GET_TODOS":return t.todos;case"GET_PROFILE":return t.users;default:return e}}function M(e,t){return"USERS"===t.type?t.users:e}function V(e,t){return{user:H(e.user,t),users:M(e.users,t),todos:J(e.todos,t)}}function W(e){var t=e.id;console.log(t);var c=Object(r.useContext)(l).secondaryColor,a=Object(r.useContext)(l).primaryColor;return Object(x.jsx)(E.a,{style:{background:c},children:Object(x.jsxs)(E.a.Body,{children:[Object(x.jsx)(E.a.Text,{children:"This Todo item has been deleted"}),Object(x.jsx)(u.a,{style:{color:a},href:"/users/".concat(t),children:"Go back to Profile"})]})})}var Y=function(){var e=Object(r.useReducer)(V,{user:{},users:[],todos:[]}),t=Object(o.a)(e,2),c=t[0],a=t[1],s=Object(r.useState)({name:"Default",primaryColor:"#000000",secondaryColor:"#FFFFFF"}),n=Object(o.a)(s,2),i=n[0],j=n[1],O=Object(P.f)({"/":Object(P.g)({view:Object(x.jsx)(R,{})}),"/todos/create":Object(P.g)({view:Object(x.jsx)(F,{})}),"/todos/:id":Object(P.g)((function(e){return{view:Object(x.jsx)(G,{id:e.params.id})}})),"/users":Object(P.g)({view:Object(x.jsx)(z,{})}),"/users/:id":Object(P.g)((function(e){return{view:Object(x.jsx)(A,{id:e.params.id})}})),"/todos/delete/:id":Object(P.g)((function(e){return{view:Object(x.jsx)(W,{id:e.params.id})}}))});return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(l.Provider,{value:i,children:Object(x.jsx)(b.Provider,{value:{state:c,dispatch:a},children:Object(x.jsx)(u.b,{routes:O,children:Object(x.jsxs)(d.a,{children:[Object(x.jsx)(T,{setTheme:j}),Object(x.jsx)("hr",{}),Object(x.jsx)(u.c,{})]})})})})})},q=c(46),K=c.n(q).a.create({baseURL:"/"});n.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(h.a,{value:K,children:Object(x.jsx)(Y,{})})}),document.getElementById("root"))}},[[112,1,2]]]);
//# sourceMappingURL=main.39728518.chunk.js.map